<ion-view view-title="question" ng-controller="questionController" cache-view="false">
<ion-header-bar align-title="center" class="bar-positive">
	<div class="buttons">
    	<button class="button icon-left ion-ios-arrow-back button-clear " ng-click="goBack()"></button>
  	</div>
  <h1 class="title">{{section.group_name}}</h1>
</ion-header-bar>
  <ion-content overflow-scroll = "true" has-header="true" has-footer="false" padding="false">
  	<div class="list card">
	  <div class="item item-body">
	    <center><p>{{question.question}} <a ng-if="question.mandatory == 'Y'">*</a></p></center>
	  </div>
	  <div class="item item-body">
	  	<form class="css-form" novalidate name="answerForm" ng-if="question.type != ';' && question.type != 'F' && question.type != 'E' && question.type != 'B' && question.type != 'A' && question.type != ':' && question.type != 'C'">
            <div class="list card">
            	<label class="item item-input" ng-if="question.type == 'D'"> <!--DATE-->
								<input type="date" ng-if="question.attributes.date_format != 'yyyy' && question.attributes.date_format != 'HH:MM'" ng-model="question.preg">
								<input type="number" ng-if="question.attributes.date_format == 'yyyy'" ng-model="question.preg">
								<button class="button icon-right ion-ios-clock-outline" ng-click="getTime()" ng-if="question.attributes.date_format == 'HH:MM'">Obtener Hora</button>
		       	</label>
		       	<div class="list" ng-if="question.type == 'G'">	 <!--GENDER-->
		       		<ion-radio ng-model="question.preg" ng-value="'M'">Hombre</ion-radio>
							<ion-radio ng-model="question.preg" ng-value="'F'">Mujer</ion-radio>
		       	</div>
		    		<label class="item item-input" ng-if="question.type == 'N'">  <!--NUMBER-->
		       		<input type="number" ng-model="question.preg">
		       	</label>
		       	<div class="list" ng-if="question.type == 'Y'">		       	<!--YES/NO-->
		       		<ion-radio ng-model="question.preg" ng-value="'Y'">Si</ion-radio>
							<ion-radio ng-model="question.preg" ng-value="'N'">No</ion-radio>
		       	</div>
			    <div class="list" ng-if="question.type == 'L'"> <!--RADIO OPTIONS-->
					  <label class="item item-radio" ng-repeat="(key, option) in question.answeroptions">
					    <ion-radio ng-model="question.preg" ng-value="key">{{option.answer}}</ion-radio>
					  </label>
						<label class="item item-radio" ng-if="question.mandatory == 'N'">
					    <ion-radio ng-model="question.preg" ng-value="">Sin Respuesta</ion-radio>							
					  </label>
						<input type="text" placeholder="otro" ng-if="question.other == 'Y'">
					</div>
				<div class="list" ng-if="question.type == 'O'"> <!--RADIO OPTIONS WITH COMMENTS-->
				  <label class="item item-radio" ng-repeat="(key, option) in question.answeroptions">
				    <ion-radio ng-model="question.preg" ng-value="key">{{option.answer}}</ion-radio>
						<input type="text">
						<hr/>
				  </label>
					<input type="text" placeholder="otro" ng-if="question.other == 'Y'">
				</div>
				<div class="list" ng-if="question.type == '5'"> <!--1 TO 5 -->
				  <ion-radio ng-model="question.preg" ng-value="'1'">1</ion-radio>
				  <ion-radio ng-model="question.preg" ng-value="'2'">2</ion-radio>
				  <ion-radio ng-model="question.preg" ng-value="'3'">3</ion-radio>
				  <ion-radio ng-model="question.preg" ng-value="'4'">4</ion-radio>
				  <ion-radio ng-model="question.preg" ng-value="'5'">5</ion-radio>
				</div>
		       	<label class="item item-input" ng-if="question.type == 'S' && question.attributes.location_mapservice != '1'"> <!--SIMPLE TEXT-->
		       		<input type="text" ng-model="question.preg">
		       	</label>
						<label class="item item-input" ng-if="question.type == 'U'"> <!--HUGE TEXT-->
							<input type="text" ng-model="question.preg">
						</label>
		       	<label class="item item-input" ng-if="question.type == 'T'"> <!--TEXT-->
		       		<input type="text" ng-model="question.preg">
		       	</label>
		       	<div class="list" ng-if="question.type == '!'">  <!--DROPDOWN LIST-->
			       	<label class="item item-input item-select">
					    <select>
					      <option selected>Seleccione una opcion</option>
					      <option ng-repeat="answeroption in question.answeroptions">{{answeroption.answer}}</option>
					    </select>
					</label>
				</div>
				<div ng-if="question.type == 'M'">		<!--CHECKBOX-->
					<div ng-repeat="option in question.subquestions">
						<ion-checkbox ng-model="option.checked" ng-checked="option.checked"> {{ option.question }}</ion-checkbox>
					</div>
					<input type="text" placeholder="otro" ng-if="question.other == 'Y'">
				</div>
				<div  class="list" ng-if="question.type == 'K'"> <!-- List of number inputs-->
					<label class="item item-input" ng-repeat="option in question.subquestions">
						{{option.question}} <input type="number" ng-model="option.checked">
					</label>
				</div>
				<div ng-if="question.type == 'P'">      <!--CHECKBOX WITH COMMENTS-->
					<div ng-repeat="option in question.subquestions">
						<ion-checkbox ng-model="option.checked" ng-checked="option.checked">
							{{ option.question }}
						</ion-checkbox>
						<input type="text">
						<hr/>
					</div>
					<input type="text" placeholder="otro" ng-if="question.other == 'Y'">
				</div>
				<div ng-if="question.type == 'S' && question.attributes.location_mapservice == '1'" >      <!--GEOLOCATION -->
					  <center><div class="item item-icon ion-ios-plus bigger-2" ng-click="getPosition()"></div></center>
					  <div ng-show="showGpsList" class="item item-text-wrap row" ng-repeat="(index,pos) in gps track by $index">
					  	<div class="col">{{index}}</div>
					    <div class="col col-75">{{gps[index]}}</div>
					  </div>
				</div>

		    </div>
			</form>
			<div ng-if="question.type == ';' || question.type == ':' || question.type == 'F' || question.type == 'E' || question.type == 'B' || question.type == 'A' || question.type == 'C'">   <!-- MATRIX -->
				<ion-list>
					<ion-item class="item-icon-right" ng-repeat="row in question.subquestions" type="item-text-wrap" ng-click="openModal(row)" ng-if="row.scale_id == 0">
							<p>{{row.question}}</p>
							<i class="icon ion-ios-arrow-right icon-accessory"></i>
					</ion-item>
				</ion-list>
			</div>
	  </div>
		</div>
	  </div>
	</div>
  </ion-content>

	<ion-footer-bar align-title="left" class="bar">
	  <div class="buttons">
	    <button class="button icon-left ion-chevron-left button-clear button-positive" ng-click="prevQuestion()">Anterior</button>
	  </div>
	  <h1 class="title"></h1>
	  <div class="buttons" ng-click="nextQuestion()" ng-if="question.mandatory == 'N' && (question.preg == '' || question.preg != '')">
			<button class="button icon-right ion-chevron-right button-clear button-positive">Siguiente</button>
	  </div>
		<div class="buttons" ng-if="question.mandatory == 'Y' && (question.preg == '' && (question.type != 'C' && question.type != 'M' && question.type != 'P' && question.type != 'F' && question.type != 'E'  && question.type != 'B' && question.type != 'A' && question.type != ':' && question.type != ';' && question.attributes.location_mapservice != '1'))">
			<button class="button icon-right ion-chevron-right button-clear">Siguiente</button>
	  </div>
		<div class="buttons" ng-click="nextQuestion()" ng-if="question.mandatory == 'Y' && (question.preg != '' || (question.type == 'C' || question.type == 'M' || question.type == 'P' || question.type == ';' || question.type == 'F' || question.type == 'A' || question.type == ':' || question.type == 'B' || question.type == 'E' || question.attributes.location_mapservice == '1'))">
			<button class="button icon-right ion-chevron-right button-clear button-positive">Siguiente</button>
	  </div>
</ion-footer-bar>
</ion-view>
